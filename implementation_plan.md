# AI Mathematical Olympiad - 実装計画

## 目標 (Goal)

Kaggle「AI Mathematical Olympiad - Progress Prize 3」において、**ゴール指向の逆算推論（Backward Chaining）** アプローチを実装する。

従来の「多数決（Self-Consistency）」方式は、問題を理解せずランダムに試行して偶然正解に当たるアプローチであり、非効率である。本計画では、人間の数学的思考に近い「目的から逆算する」方式を採用する。

---

## コアコンセプト (Core Concept)

### ゴール指向の逆算推論

```
問題 → ゴール特定 → 必要パラメータ分解 → 導出計画 → 計算実行 → 回答
```

1. **ゴール特定**: 問題が求めている「答え」は何か？（面積、個数、最大値など）
2. **パラメータ分解**: その答えを得るには何が必要か？（中間値の洗い出し）
3. **導出計画**: 各パラメータは与えられた条件からどう計算できるか？
4. **計算実行**: 計画に従い順方向で計算し、答えを出す

---

## 実装フェーズ (Implementation Phases)

### Phase 1: 問題分析モジュール

LLMに問題文を解析させ、以下を抽出する：

- **求めるもの（Goal）**: 最終的な答えの種類
- **与えられた条件（Given）**: 数値、関係式、制約
- **問題の分野**: 代数、幾何、整数論、組合せ論など

### Phase 2: 逆算推論モジュール

ゴールから逆算して解法計画を生成する：

- ゴールを得るために必要なサブゴールを列挙
- 各サブゴールをさらに分解
- 与えられた条件に到達するまで再帰的に展開

### Phase 3: 計画実行モジュール

生成された計画をPythonコードに変換し実行する：

- 各ステップを順方向で計算
- エラー時は計画を再検討（Reflexion）

### Phase 4: 検証・統合

- ローカル評価環境でAIME過去問を用いてテスト
- Kaggle Notebook形式に統合

---

## 技術選定 (Technology)

| 項目 | 選定候補 |
|------|----------|
| Base Model | DeepSeek-Math-7B / Gemma-2-9B / Qwen-2.5-Math |
| 量子化 | 4-bit (bitsandbytes) |
| コード実行 | Python subprocess (sandbox) |
| 評価データ | AIME 2023-2024 / NuminaMath-CoT |

---

## 検証計画 (Verification)

- AIME過去問10-20問で正答率を測定
- 従来の多数決方式との比較実験
- 生成された「解法計画」の論理的妥当性を目視確認
